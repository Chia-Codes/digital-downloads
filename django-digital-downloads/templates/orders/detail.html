{% extends "base.html" %}
{% block title %}Order Detail{% endblock %}
{% block content %}
{% load currency math_extras %}
<h1 class="h3 mb-3">Order {{ order.id }}</h1>

<ul class="list-unstyled mb-3">
  <li><strong>Date:</strong> {{ order.created_at|date:"Y-m-d H:i" }}</li>
  <li><strong>Status:</strong> {{ order.status|title }}</li>
  <li><strong>Total:</strong> £{{ order.total_pennies|money }}</li>
</ul>

<table class="table">
  <thead>
    <tr>
      <th>Product</th>
      <th class="text-end">Qty</th>
      <th class="text-end">Unit</th>
      <th class="text-end">Total</th>
    </tr>
  </thead>
  <tbody>
    {% for item in items %}
    <tr>
      <td>{{ item.product.title }}</td>
      <td class="text-end">{{ item.quantity }}</td>
      <td class="text-end">£{{ item.unit_price_pennies|money }}</td>
+     <td class="text-end">£{{ item.unit_price_pennies|mul:item.quantity|money }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
